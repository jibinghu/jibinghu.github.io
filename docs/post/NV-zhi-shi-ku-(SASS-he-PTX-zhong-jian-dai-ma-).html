<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_high_contrast" data-light-theme="light_high_contrast" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://q6.itc.cn/q_70/images01/20240415/2cdb0abd9b724802baff3b9199d3fbc4.jpeg"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="### SASS 和 PTX

SASS(Streaming Assembler) 和 PTX(Parallel Thread Execution)都是 NVIDIA CUDA 编程模型中的组件，处于不同的抽象层次。">
<meta property="og:title" content="NV知识库(SASS和PTX中间代码)">
<meta property="og:description" content="### SASS 和 PTX

SASS(Streaming Assembler) 和 PTX(Parallel Thread Execution)都是 NVIDIA CUDA 编程模型中的组件，处于不同的抽象层次。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://jibinghu.github.io/post/NV-zhi-shi-ku-%28SASS-he-PTX-zhong-jian-dai-ma-%29.html">
<meta property="og:image" content="https://q6.itc.cn/q_70/images01/20240415/2cdb0abd9b724802baff3b9199d3fbc4.jpeg">
<title>NV知识库(SASS和PTX中间代码)</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">NV知识库(SASS和PTX中间代码)</h1>
<div class="title-right">
    <a href="https://jibinghu.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/jibinghu/jibinghu.github.io/issues/20" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h3>SASS 和 PTX</h3>
<p>SASS(Streaming Assembler) 和 PTX(Parallel Thread Execution)都是 NVIDIA CUDA 编程模型中的组件，处于不同的抽象层次。</p>
<h4>1. PTX (Parallel Thread Execution)</h4>
<p><strong>PTX</strong> 是一种中间语言：PTX 是一种与硬件无关的虚拟指令集架构，通常被称为“虚拟化的汇编语言”。当你编写 CUDA C/C++ 代码并进行编译时，CUDA 编译器（nvcc）首先将代码编译成 PTX 代码。PTX 提供了对 CUDA 核心功能的抽象，允许对并行线程的执行进行描述。<br>
<strong>硬件无关性</strong>：PTX 是硬件无关的，这意味着它可以在不同的 GPU 体系结构上使用，且 CUDA 编译器在后期会将 PTX 转换为特定架构的机器代码（如 SASS）。<br>
<strong>编译步骤</strong>：当 CUDA 程序编译时，首先生成 PTX 代码，之后再根据目标 GPU 的架构将 PTX 转换成最终的机器码。这样可以支持不同的 CUDA 版本和 GPU 架构。<br>
用途：PTX 用于开发、调试和优化 CUDA 程序，提供了一种可以在不同硬件平台之间移植的灵活性。它也为未来的硬件架构提供了向后兼容性。</p>
<h4>2. SASS (Streaming Assembler)</h4>
<p><strong>概念与功能</strong>：SASS 是最终的机器代码 -&gt; SASS 是 NVIDIA GPU 的底层汇编语言，直接对应于特定 GPU 硬件架构的机器指令。PTX 代码经过编译后，最终会被转换成 SASS 代码，SASS 代码可以直接在 GPU 上执行。<br>
<strong>硬件相关性</strong>：与 PTX 不同，SASS 是特定于硬件的。不同的 NVIDIA GPU 架构（如 Volta、Ampere）会有不同的 SASS 指令集。因为 SASS 是针对特定硬件优化的，所以它能够最大化地利用 GPU 硬件的性能。<br>
<strong>不可移植</strong>：SASS 是硬件绑定的，不同架构之间的 SASS 代码不可互换。因此，SASS 代码不能像 PTX 那样容易移植到不同的硬件架构上。<br>
<strong>性能调优</strong>：高级开发者可以查看或手动调整 SASS 代码以进行性能调优，但这是非常底层的操作，通常只有在需要极致性能优化时才会涉及。</p>
<h4>eg.</h4>
<div class="highlight highlight-source-cuda-c++"><pre class="notranslate"><span class="pl-k">__global__</span> <span class="pl-k">void</span> <span class="pl-en">test</span>(<span class="pl-k">int</span>&amp; c){
    c= <span class="pl-c1">blockIdx</span>.<span class="pl-smi">x</span>;
}</pre></div>
<p>编译成PTX代码：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">.visible .entry </span><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;)( </span>
<span class="pl-en">        .param .u64 </span><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;)_param_0</span>
<span class="pl-en">)</span>
<span class="pl-en">{</span>

<span class="pl-en">        ld.param.u64    %rd1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;)_param_0</span><span class="pl-s1">]</span><span class="pl-c">; 从函数的参数寄存器中加载参数（即int&amp;的地址）到通用寄存器%rd1中</span>
<span class="pl-en">        cvta.to.</span><span class="pl-c1">global</span><span class="pl-en">.u64      %rd2</span><span class="pl-s1">,</span><span class="pl-en"> %rd1</span><span class="pl-c">; 将这个地址转换为全局内存地址，并存储在寄存器%rd2中</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.u32         %r1</span><span class="pl-s1">,</span><span class="pl-en"> %ctaid.x</span><span class="pl-c">; 将当前线程块的ID（%ctaid.x）存储到寄存器%r1中。%ctaid.x是一个内置的PTX变量，表示当前线程块在网格中的x维索引</span>
<span class="pl-en">        st.</span><span class="pl-c1">global</span><span class="pl-en">.u32   </span><span class="pl-s1">[</span><span class="pl-en">%rd2</span><span class="pl-s1">],</span><span class="pl-en"> %r1</span><span class="pl-c">; 将线程块的ID（存储在%r1中）写入到全局内存中%rd2指向的地址。也就是说，test函数把线程块ID存储在传入的int&amp;所指向的位置</span>
<span class="pl-en">        </span><span class="pl-k">ret</span><span class="pl-c">;</span>

<span class="pl-en">}</span></pre></div>
<p>具体架构与 SM 关系：</p>
<ul>
<li>sm50: Maxswell 麦克斯韦架构。比如sm52对应GTX 980.</li>
<li>sm60: Pascal 帕斯卡架构。比如sm61对应GTX 1080.</li>
<li>sm70: Volta 伏特架构。比如sm70对应V100.</li>
<li>sm75: Turing 图灵架构。比如sm75对应RTX 2080, T4</li>
<li>sm80: Ampere 安培架构。比如A100, RTX3080</li>
<li>sm90: Hopper 哈珀架构。比如H100, RTX4080</li>
</ul>
<p>下面我们将其编译成sm50架构的SASS代码：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-c">  ; 将寄存器c[0x0][0x20]的内容移动到寄存器R1，c[0x0][0x20]通常是%tid.x</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x140</span><span class="pl-s1">]</span><span class="pl-en">  ； 将寄存器c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x140</span><span class="pl-s1">]</span><span class="pl-en">的内容移动到寄存器R2。c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x140</span><span class="pl-s1">]</span><span class="pl-en">通常存储的是传递给内核的第一个参数的地址</span>
<span class="pl-en"> S2R R0</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X</span><span class="pl-c">         ; S2R指令将特殊寄存器SR_CTAID.X的值加载到寄存器R0中。SR_CTAID.X表示当前线程块在网格中的X维索引</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x144</span><span class="pl-s1">]</span><span class="pl-c">  ; 将寄存器c[0x0][0x144]的内容移动到寄存器R3</span>
<span class="pl-en"> STG.E </span><span class="pl-s1">[</span><span class="pl-en">R2</span><span class="pl-s1">],</span><span class="pl-en"> R0</span><span class="pl-c">  ; STG.E指令是一个存储指令，将寄存器R0的值存储到寄存器R2所指向的全局内存地址中</span>
<span class="pl-en"> </span><span class="pl-k">NOP</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">NOP</span><span class="pl-en"> </span>
<span class="pl-en"> EXIT </span></pre></div>
<p>与PTX不同，麦克斯韦架构下读取内存没有用ld指令，而仍然是MOV指令。而读取特殊寄存器SR_CTAID有专门指令S2R。写全局内存有指令STG.<br>
sm60架构汇编：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x140</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> S2R R0</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X         </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x144</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> STG.E </span><span class="pl-s1">[</span><span class="pl-en">R2</span><span class="pl-s1">],</span><span class="pl-en"> R0 </span>
<span class="pl-en"> </span><span class="pl-k">NOP</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">NOP</span><span class="pl-en"> </span>
<span class="pl-en"> EXIT</span></pre></div>
<p>再看sm70架构汇编：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> @!PT SHFL.IDX PT</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> S2R R5</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x160</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x164</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> STG.E.SYS </span><span class="pl-s1">[</span><span class="pl-en">R2</span><span class="pl-s1">],</span><span class="pl-en"> R5 </span>
<span class="pl-en"> EXIT</span></pre></div>
<blockquote>
<p>伏特架构的代码出现了线程同步指令SHFL.IDX，这是一种用于线程之间通信的指令，可以在一个线程中访问另一个线程的寄存器值。这里所有的源和目标寄存器都是RZ，这是一个特殊的寄存器，总是包含0。@!PT表示这个指令只在谓词寄存器PT的值为false时执行，但是PT始终为true，所以这个SHFL.IDX指令不会执行任何实际操作。</p>
</blockquote>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> S2R R0</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X </span>
<span class="pl-en"> ULDC.</span><span class="pl-c1">64</span><span class="pl-en"> UR4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x160</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> STG.E.SYS </span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">],</span><span class="pl-en"> R0 </span>
<span class="pl-en"> EXIT </span></pre></div>
<p>图灵架构增加了ULDC指令，它用来从常量内存中读取到通用寄存器中。<br>
sm80架构sass:</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> S2R R5</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x160</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> ULDC.</span><span class="pl-c1">64</span><span class="pl-en"> UR4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x118</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x164</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> STG.E </span><span class="pl-s1">[</span><span class="pl-en">R2.</span><span class="pl-c1">64</span><span class="pl-s1">],</span><span class="pl-en"> R5 </span>
<span class="pl-en"> EXIT </span></pre></div>
<p>sm90架构sass:</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-k">test</span><span class="pl-en">(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> LDC R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> S2R R5</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X </span>
<span class="pl-en"> LDC.</span><span class="pl-c1">64</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x210</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> ULDC.</span><span class="pl-c1">64</span><span class="pl-en"> UR4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x208</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> STG.E desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R2.</span><span class="pl-c1">64</span><span class="pl-s1">],</span><span class="pl-en"> R5 </span>
<span class="pl-en"> EXIT</span></pre></div>
<p>sm80和90没有实质上的变化。</p>
<h2>编译和反汇编工具</h2>
<p>接下来通过完整流程对 cuda 代码进行分析：<br>
首先是设备代码：</p>
<div class="highlight highlight-source-cuda-c++"><pre class="notranslate"><span class="pl-k">__global__</span> <span class="pl-k">void</span> <span class="pl-en">sine</span>(<span class="pl-k">double</span>* a) {
    <span class="pl-k">int</span> i = <span class="pl-c1">threadIdx</span>.<span class="pl-smi">x</span>;
    a[i] = <span class="pl-c1">sin</span>(a[i]);
}</pre></div>
<p>然后我们加上CPU和GPU之间内存来回复制以及错误检查的代码：</p>
<div class="highlight highlight-source-cuda-c++"><pre class="notranslate"><span class="pl-c"><span class="pl-c">//</span> Helper function for using CUDA to add vectors in parallel.</span>
cudaError_t <span class="pl-en">sineWithCuda</span>(<span class="pl-k">double</span>* a, <span class="pl-k">unsigned</span> <span class="pl-k">int</span> size)
{
    <span class="pl-k">double</span>* dev_a = <span class="pl-c1">0</span>;
    cudaError_t cudaStatus;

    <span class="pl-c"><span class="pl-c">//</span> Choose which GPU to run on, change this on a multi-GPU system.</span>
    cudaStatus = <span class="pl-c1">cudaSetDevice</span>(<span class="pl-c1">0</span>);
    <span class="pl-k">if</span> (cudaStatus != cudaSuccess) {
        <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>cudaSetDevice failed!  Do you have a CUDA-capable GPU installed?<span class="pl-pds">"</span></span>);
        <span class="pl-k">goto</span> Error;
    }

    cudaStatus = <span class="pl-c1">cudaMalloc</span>((<span class="pl-k">void</span>**)&amp;dev_a, size * <span class="pl-k">sizeof</span>(<span class="pl-k">double</span>));
    <span class="pl-k">if</span> (cudaStatus != cudaSuccess) {
        <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>cudaMalloc failed!<span class="pl-pds">"</span></span>);
        <span class="pl-k">goto</span> Error;
    }

    <span class="pl-c"><span class="pl-c">//</span> Copy input vectors from host memory to GPU buffers.</span>
    cudaStatus = <span class="pl-c1">cudaMemcpy</span>(dev_a, a, size * <span class="pl-k">sizeof</span>(<span class="pl-k">double</span>), cudaMemcpyHostToDevice);
    <span class="pl-k">if</span> (cudaStatus != cudaSuccess) {
        <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>cudaMemcpy failed!<span class="pl-pds">"</span></span>);
        <span class="pl-k">goto</span> Error;
    }

    <span class="pl-c"><span class="pl-c">//</span> Launch a kernel on the GPU with one thread for each element.</span>
    sine &lt;&lt; &lt;<span class="pl-c1">1</span>, size &gt;&gt; &gt; (dev_a);

    <span class="pl-c"><span class="pl-c">//</span> Check for any errors launching the kernel</span>
    cudaStatus = <span class="pl-c1">cudaGetLastError</span>();
    <span class="pl-k">if</span> (cudaStatus != cudaSuccess) {
        <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>addKernel launch failed: %s<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, <span class="pl-c1">cudaGetErrorString</span>(cudaStatus));
        <span class="pl-k">goto</span> Error;
    }

    <span class="pl-c"><span class="pl-c">//</span> cudaDeviceSynchronize waits for the kernel to finish, and returns</span>
    <span class="pl-c"><span class="pl-c">//</span> any errors encountered during the launch.</span>
    cudaStatus = <span class="pl-c1">cudaDeviceSynchronize</span>();
    <span class="pl-k">if</span> (cudaStatus != cudaSuccess) {
        <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>cudaDeviceSynchronize returned error code %d after launching addKernel!<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, cudaStatus);
        <span class="pl-k">goto</span> Error;
    }

    <span class="pl-c"><span class="pl-c">//</span> Copy output vector from GPU buffer to host memory.</span>
    cudaStatus = <span class="pl-c1">cudaMemcpy</span>(a, dev_a, size * <span class="pl-k">sizeof</span>(<span class="pl-k">double</span>), cudaMemcpyDeviceToHost);
    <span class="pl-k">if</span> (cudaStatus != cudaSuccess) {
        <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>cudaMemcpy failed!<span class="pl-pds">"</span></span>);
        <span class="pl-k">goto</span> Error;
    }

Error:
    <span class="pl-c1">cudaFree</span>(dev_a);

    <span class="pl-k">return</span> cudaStatus;
}</pre></div>
<p>最后写一个main函数来调用，以及释放设备：</p>
<div class="highlight highlight-source-cuda-c++"><pre class="notranslate"><span class="pl-k">int</span> <span class="pl-en">main</span>()
{
    <span class="pl-k">const</span> <span class="pl-k">int</span> arraySize = <span class="pl-c1">5</span>;

    <span class="pl-k">double</span> s1[arraySize] = { <span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span> };

    cudaError_t cudaStatus = <span class="pl-c1">sineWithCuda</span>(s1, arraySize);
    <span class="pl-k">if</span> (cudaStatus != cudaSuccess) {
        <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>sineWithCuda failed!<span class="pl-pds">"</span></span>);
        <span class="pl-k">return</span> <span class="pl-c1">1</span>;
    }

    <span class="pl-k">for</span> (<span class="pl-k">int</span> i0 = <span class="pl-c1">0</span>; i0 &lt; arraySize; i0++) {
        std::cout &lt;&lt; s1[i0] &lt;&lt;<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>;
    }
    std::cout &lt;&lt; std::endl;

    <span class="pl-c"><span class="pl-c">//</span> cudaDeviceReset must be called before exiting in order for profiling and</span>
    <span class="pl-c"><span class="pl-c">//</span> tracing tools such as Nsight and Visual Profiler to show complete traces.</span>
    cudaStatus = <span class="pl-c1">cudaDeviceReset</span>();
    <span class="pl-k">if</span> (cudaStatus != cudaSuccess) {
        <span class="pl-c1">fprintf</span>(stderr, <span class="pl-s"><span class="pl-pds">"</span>cudaDeviceReset failed!<span class="pl-pds">"</span></span>);
        <span class="pl-k">return</span> <span class="pl-c1">1</span>;
    }

    <span class="pl-k">return</span> <span class="pl-c1">0</span>;
}</pre></div>
<p>将文件保存为kernel.cu，编译运行：<br>
<code class="notranslate">nvcc kernel.cu</code><br>
如果是在Linux下，就生成a.out；在Windows下就生成a.exe.<br>
我们还可以通过gencode参数来指定编译成不同的架构的代码，比如：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">nvcc kernel.cu -gencode=arch=compute_52,code=<span class="pl-cce">\"</span>sm_52,compute_52<span class="pl-cce">\"</span> -gencode=arch=compute_61,code=<span class="pl-cce">\"</span>sm_61,compute_61<span class="pl-cce">\"</span> -gencode=arch=compute_70,code=<span class="pl-cce">\"</span>sm_70,compute_70<span class="pl-cce">\"</span> -gencode=arch=compute_75,code=<span class="pl-cce">\"</span>sm_75,compute_75<span class="pl-cce">\"</span> -gencode=arch=compute_80,code=<span class="pl-cce">\"</span>sm_80,compute_80<span class="pl-cce">\"</span> -gencode=arch=compute_90,code=<span class="pl-cce">\"</span>sm_90,compute_90<span class="pl-cce">\"</span></pre></div>
<p>下面我们就可以通过cuobjdump工具来查看ptx和sass代码。<br>
查看PTX代码，以Windows为例：<br>
<code class="notranslate">cuobjdump --dump-ptx a.exe</code><br>
查看sass代码，还以Windows为例：<br>
<code class="notranslate">cuobjdump --dump-sass a.exe</code><br>
通过cubin参数，NVCC可以生成cubin文件：<br>
<code class="notranslate">nvcc kernel.cu -gencode=arch=compute_90,code=sm_90 --cubin</code><br>
注意，cubin只能支持单一一种架构。<br>
我们可以使用nvdisasm来对cubin文件进行反汇编：<br>
<code class="notranslate">nvdisasm kernel.cubin</code><br>
我们还可以输出cubin的流程图，通过dot工具转换成png格式：<br>
<code class="notranslate">nvdisasm -bbcfg kernel.cubin | dot -o1.png -Tpng</code><br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/9ef1bf80-834c-4ac4-a4b5-18e8e15bd0a3"><img src="https://github.com/user-attachments/assets/9ef1bf80-834c-4ac4-a4b5-18e8e15bd0a3" alt="image" style="max-width: 100%;"></a></p>
<h2>加法指令</h2>
<p>下面我们在上面test的基础上，增加一个加法指令：</p>
<div class="highlight highlight-source-cuda-c++"><pre class="notranslate"><span class="pl-k">__global__</span> <span class="pl-k">void</span> <span class="pl-en">test1</span>(<span class="pl-k">int</span>&amp; c){
    c= <span class="pl-c1">blockIdx</span>.<span class="pl-smi">x</span>+<span class="pl-c1">1</span>;
}</pre></div>
<p>编译成PTX代码：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">.visible .entry test1(</span><span class="pl-k">int</span><span class="pl-en">&amp;)(</span>
<span class="pl-en">        .param .u64 test1(</span><span class="pl-k">int</span><span class="pl-en">&amp;)_param_0</span>
<span class="pl-en">)</span>
<span class="pl-en">{</span>

<span class="pl-en">        ld.param.u64    %rd1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">test1(</span><span class="pl-k">int</span><span class="pl-en">&amp;)_param_0</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        cvta.to.</span><span class="pl-c1">global</span><span class="pl-en">.u64      %rd2</span><span class="pl-s1">,</span><span class="pl-en"> %rd1</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.u32         %r1</span><span class="pl-s1">,</span><span class="pl-en"> %ctaid.x</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">add</span><span class="pl-en">.s32         %r2</span><span class="pl-s1">,</span><span class="pl-en"> %r1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-c">;</span>
<span class="pl-en">        st.</span><span class="pl-c1">global</span><span class="pl-en">.u32   </span><span class="pl-s1">[</span><span class="pl-en">%rd2</span><span class="pl-s1">],</span><span class="pl-en"> %r2</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">ret</span><span class="pl-c">;</span>

<span class="pl-en">}</span></pre></div>
<p>增加了一条add.s32指令，用于32位有符号加法操作。<br>
编译成sm50架构的SASS代码</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">test1(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x140</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> S2R R0</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X         </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x144</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> IADD32I R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-en"> </span>
<span class="pl-en"> STG.E </span><span class="pl-s1">[</span><span class="pl-en">R2</span><span class="pl-s1">],</span><span class="pl-en"> R0 </span>
<span class="pl-en"> </span><span class="pl-k">NOP</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">NOP</span><span class="pl-en"> </span>
<span class="pl-en"> EXIT </span></pre></div>
<p>add.s32指令被编译成了IADD32I指令。</p>
<p>sm70的代码就比较有新意了，它使用加乘计算指令IMAD.MOV.U32来代替sm50,sm60的MOV. 计算时改用了三元计算的IADD3指令。当然，对于功能上没有什么影响。</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">test1(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en">IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R1</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en">@!PT SHFL.IDX PT</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en">S2R R5</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X </span>
<span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x160</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en">IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x164</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en">IADD3 R5</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en">STG.E.SYS </span><span class="pl-s1">[</span><span class="pl-en">R2</span><span class="pl-s1">],</span><span class="pl-en"> R5 </span>
<span class="pl-en">EXIT</span></pre></div>
<p>sm75的时候又变回来了,不过仍然使用IADD3.</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">test1(</span><span class="pl-k">int</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> S2R R0</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X </span>
<span class="pl-en"> ULDC.</span><span class="pl-c1">64</span><span class="pl-en"> UR4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x160</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> IADD3 R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> STG.E.SYS </span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">],</span><span class="pl-en"> R0 </span>
<span class="pl-en"> EXIT </span></pre></div>
<h2>数学函数</h2>
<p>我们下面来求一个平方根。CUDA内置了很多数学函数，我们可以直接调用：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">__global__ void test2(</span><span class="pl-c1">float</span><span class="pl-en">&amp; f){</span>
<span class="pl-en">    f = blockIdx.x</span><span class="pl-c">;</span>
<span class="pl-en">    f = sqrtf(f)</span><span class="pl-c">;</span>
<span class="pl-en">}</span></pre></div>
<p>PTX代码：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">.visible .entry test2(</span><span class="pl-c1">float</span><span class="pl-en">&amp;)(</span>
<span class="pl-en">        .param .u64 test2(</span><span class="pl-c1">float</span><span class="pl-en">&amp;)_param_0</span>
<span class="pl-en">)</span>
<span class="pl-en">{</span>

<span class="pl-en">        ld.param.u64    %rd1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">test2(</span><span class="pl-c1">float</span><span class="pl-en">&amp;)_param_0</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        cvta.to.</span><span class="pl-c1">global</span><span class="pl-en">.u64      %rd2</span><span class="pl-s1">,</span><span class="pl-en"> %rd1</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.u32         %r1</span><span class="pl-s1">,</span><span class="pl-en"> %ctaid.x</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">cvt</span><span class="pl-en">.rn.f32.u32  %f1</span><span class="pl-s1">,</span><span class="pl-en"> %r1</span><span class="pl-c">;</span>
<span class="pl-en">        sqrt.rn.f32     %f2</span><span class="pl-s1">,</span><span class="pl-en"> %f1</span><span class="pl-c">;</span>
<span class="pl-en">        st.</span><span class="pl-c1">global</span><span class="pl-en">.f32   </span><span class="pl-s1">[</span><span class="pl-en">%rd2</span><span class="pl-s1">],</span><span class="pl-en"> %f2</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">ret</span><span class="pl-c">;</span>

<span class="pl-en">}</span></pre></div>
<p>sqrtf被编译成了sqrt.rn.f32指令。<br>
到了SASS代码，这一条指令就变得相当有趣了：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">test2(</span><span class="pl-c1">float</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> S2R R0</span><span class="pl-s1">,</span><span class="pl-en"> SR_CTAID.X </span>
<span class="pl-en"> I2F.F32.U32 R0</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> IADD32I R3</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0xd000000</span><span class="pl-en"> </span>
<span class="pl-en"> MUFU.RSQ R2</span><span class="pl-s1">,</span><span class="pl-en"> R0         </span>
<span class="pl-en"> ISETP.GT.U32.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x0</span><span class="pl-s1">],</span><span class="pl-en"> PT </span>
<span class="pl-en"> @!P0 BRA `(.L_x_0) </span>
<span class="pl-en"> CAL `(</span><span class="pl-c1">$</span><span class="pl-en">test2(</span><span class="pl-c1">float</span><span class="pl-en">&amp;)</span><span class="pl-c1">$</span><span class="pl-en">__cuda_sm20_sqrt_rn_f32_slowpath) </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R2 </span>
<span class="pl-en"> BRA `(.L_x_1)         </span>
<span class="pl-en">.L_x_0:</span>
<span class="pl-en"> </span><span class="pl-k">FMUL</span><span class="pl-en">.FTZ R3</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R2 </span>
<span class="pl-en"> </span><span class="pl-k">FMUL</span><span class="pl-en">.FTZ R2</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">5</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R0</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R3</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> FFMA R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R3 </span>
<span class="pl-en">.L_x_1:</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x140</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x144</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> STG.E </span><span class="pl-s1">[</span><span class="pl-en">R2</span><span class="pl-s1">],</span><span class="pl-en"> R0 </span>
<span class="pl-en"> EXIT </span>
<span class="pl-c1">$</span><span class="pl-en">test2(</span><span class="pl-c1">float</span><span class="pl-en">&amp;)</span><span class="pl-c1">$</span><span class="pl-en">__cuda_sm20_sqrt_rn_f32_slowpath:</span>
<span class="pl-en"> LOP.</span><span class="pl-k">AND</span><span class="pl-en">.NZ P0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x4</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> @!P0 </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> @!P0 </span><span class="pl-k">RET</span><span class="pl-en">         </span>
<span class="pl-en"> FSETP.GEU.FTZ.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> @!P0 MOV32I R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x7fffffff</span><span class="pl-en"> </span>
<span class="pl-en"> @!P0 </span><span class="pl-k">RET</span><span class="pl-en">         </span>
<span class="pl-en"> FSETP.GTU.FTZ.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> |R0|</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">+</span><span class="pl-en">INF </span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> @P0 </span><span class="pl-k">FADD</span><span class="pl-en">.FTZ R2</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-en"> </span>
<span class="pl-en"> @P0 </span><span class="pl-k">RET</span><span class="pl-en">         </span>
<span class="pl-en"> FSETP.NEU.FTZ.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> |R0|</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">+</span><span class="pl-en">INF </span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> @!P0 </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> @!P0 </span><span class="pl-k">RET</span><span class="pl-en">         </span>
<span class="pl-en"> FFMA R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-en">.84467440737095516160e</span><span class="pl-s1">+</span><span class="pl-c1">19</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> MUFU.RSQ R2</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> </span><span class="pl-k">FMUL</span><span class="pl-en">.FTZ R3</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R2 </span>
<span class="pl-en"> </span><span class="pl-k">FMUL</span><span class="pl-en">.FTZ R2</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">5</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">FADD</span><span class="pl-en">.FTZ R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R3.reuse</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">RZ </span>
<span class="pl-en"> FFMA R5</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> FFMA R2</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R3 </span>
<span class="pl-en"> </span><span class="pl-k">FMUL</span><span class="pl-en">.FTZ R2</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">2</span><span class="pl-en">.3283064365386962891e</span><span class="pl-s1">-</span><span class="pl-c1">10</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">RET</span><span class="pl-en">  </span></pre></div>
<p>首先，因为sqrtf要求输入是浮点数，所以用I2F.F32.U32指令将整数转换成浮点数。然后，sqrtf的实现是一个迭代算法，需要一个初始值。这里用IADD32I指令将初始值设为-0xd000000。然后，用MUFU.RSQ指令计算初始值的平方根的倒数。</p>
<p>slowpath这一分支主要用于处理异常情况，比如NaN, INF, 0等。比如：<br>
<code class="notranslate">FSETP.GTU.FTZ.AND P0, PT, |R0|, +INF , PT </code><br>
这一句就是用来计算输入是否是正无穷，这部分代码从sm50到sm90都是一样的。</p>
<h2>不能封装成一条指令的数学计算</h2>
<p>求平方根可以用一条指令来搞定，但是对于大多数的数学计算来说，并没有这么多指令。最终的实现还是会以汇编序列的方式来实现。<br>
我们先看一个相对简单的，求自然对数的：</p>
<div class="highlight highlight-source-cuda-c++"><pre class="notranslate"><span class="pl-k">__global__</span> <span class="pl-k">void</span> <span class="pl-en">testLog</span>(<span class="pl-k">float</span>&amp; f){
    f = <span class="pl-c1">logf</span>(f);
}</pre></div>
<p>翻译成PTX代码：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">.visible .entry testLog(</span><span class="pl-c1">float</span><span class="pl-en">&amp;)(</span>
<span class="pl-en">        .param .u64 testLog(</span><span class="pl-c1">float</span><span class="pl-en">&amp;)_param_0</span>
<span class="pl-en">)</span>
<span class="pl-en">{</span>

<span class="pl-en">        ld.param.u64    %rd2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">testLog(</span><span class="pl-c1">float</span><span class="pl-en">&amp;)_param_0</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        cvta.to.</span><span class="pl-c1">global</span><span class="pl-en">.u64      %rd1</span><span class="pl-s1">,</span><span class="pl-en"> %rd2</span><span class="pl-c">;</span>
<span class="pl-en">        ld.</span><span class="pl-c1">global</span><span class="pl-en">.f32   %f5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd1</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        setp.lt.f32     %p1</span><span class="pl-s1">,</span><span class="pl-en"> %f5</span><span class="pl-s1">,</span><span class="pl-en"> 0f00800000</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mul</span><span class="pl-en">.f32         %f6</span><span class="pl-s1">,</span><span class="pl-en"> %f5</span><span class="pl-s1">,</span><span class="pl-en"> 0f4B000000</span><span class="pl-c">;</span>
<span class="pl-en">        selp.f32        %f1</span><span class="pl-s1">,</span><span class="pl-en"> %f6</span><span class="pl-s1">,</span><span class="pl-en"> %f5</span><span class="pl-s1">,</span><span class="pl-en"> %p1</span><span class="pl-c">;</span>
<span class="pl-en">        selp.f32        %f7</span><span class="pl-s1">,</span><span class="pl-en"> 0fC1B80000</span><span class="pl-s1">,</span><span class="pl-en"> 0f00000000</span><span class="pl-s1">,</span><span class="pl-en"> %p1</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.b32         %r1</span><span class="pl-s1">,</span><span class="pl-en"> %f1</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">add</span><span class="pl-en">.s32         %r2</span><span class="pl-s1">,</span><span class="pl-en"> %r1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">1059760811</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">and</span><span class="pl-en">.b32         %r3</span><span class="pl-s1">,</span><span class="pl-en"> %r2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">8388608</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">sub</span><span class="pl-en">.s32         %r4</span><span class="pl-s1">,</span><span class="pl-en"> %r1</span><span class="pl-s1">,</span><span class="pl-en"> %r3</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.b32         %f8</span><span class="pl-s1">,</span><span class="pl-en"> %r4</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">cvt</span><span class="pl-en">.rn.f32.s32  %f9</span><span class="pl-s1">,</span><span class="pl-en"> %r3</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f10</span><span class="pl-s1">,</span><span class="pl-en"> 0f34000000</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f11</span><span class="pl-s1">,</span><span class="pl-en"> %f9</span><span class="pl-s1">,</span><span class="pl-en"> %f10</span><span class="pl-s1">,</span><span class="pl-en"> %f7</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">add</span><span class="pl-en">.f32         %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f8</span><span class="pl-s1">,</span><span class="pl-en"> 0fBF800000</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f13</span><span class="pl-s1">,</span><span class="pl-en"> 0f3E1039F6</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f14</span><span class="pl-s1">,</span><span class="pl-en"> 0fBE055027</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f15</span><span class="pl-s1">,</span><span class="pl-en"> %f14</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f13</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f16</span><span class="pl-s1">,</span><span class="pl-en"> 0fBDF8CDCC</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f17</span><span class="pl-s1">,</span><span class="pl-en"> %f15</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f16</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f18</span><span class="pl-s1">,</span><span class="pl-en"> 0f3E0F2955</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f19</span><span class="pl-s1">,</span><span class="pl-en"> %f17</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f18</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f20</span><span class="pl-s1">,</span><span class="pl-en"> 0fBE2AD8B9</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f21</span><span class="pl-s1">,</span><span class="pl-en"> %f19</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f20</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f22</span><span class="pl-s1">,</span><span class="pl-en"> 0f3E4CED0B</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f23</span><span class="pl-s1">,</span><span class="pl-en"> %f21</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f22</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f24</span><span class="pl-s1">,</span><span class="pl-en"> 0fBE7FFF22</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f25</span><span class="pl-s1">,</span><span class="pl-en"> %f23</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f24</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f26</span><span class="pl-s1">,</span><span class="pl-en"> 0f3EAAAA78</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f27</span><span class="pl-s1">,</span><span class="pl-en"> %f25</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f26</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f28</span><span class="pl-s1">,</span><span class="pl-en"> 0fBF000000</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f29</span><span class="pl-s1">,</span><span class="pl-en"> %f27</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f28</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mul</span><span class="pl-en">.f32         %f30</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f29</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f31</span><span class="pl-s1">,</span><span class="pl-en"> %f30</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-s1">,</span><span class="pl-en"> %f12</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f32</span><span class="pl-s1">,</span><span class="pl-en"> 0f3F317218</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f35</span><span class="pl-s1">,</span><span class="pl-en"> %f11</span><span class="pl-s1">,</span><span class="pl-en"> %f32</span><span class="pl-s1">,</span><span class="pl-en"> %f31</span><span class="pl-c">;</span>
<span class="pl-en">        setp.lt.u32     %p2</span><span class="pl-s1">,</span><span class="pl-en"> %r1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">2139095040</span><span class="pl-c">;</span>
<span class="pl-en">        @%p2 bra</span>        <span class="pl-c1">$</span><span class="pl-en">L__BB3_2</span><span class="pl-c">;</span>

<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f32         %f33</span><span class="pl-s1">,</span><span class="pl-en"> 0f7F800000</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f32      %f35</span><span class="pl-s1">,</span><span class="pl-en"> %f1</span><span class="pl-s1">,</span><span class="pl-en"> %f33</span><span class="pl-s1">,</span><span class="pl-en"> %f33</span><span class="pl-c">;</span>

<span class="pl-c1">$</span><span class="pl-en">L__BB3_2:</span>
<span class="pl-en">        setp.eq.f32     %p3</span><span class="pl-s1">,</span><span class="pl-en"> %f1</span><span class="pl-s1">,</span><span class="pl-en"> 0f00000000</span><span class="pl-c">;</span>
<span class="pl-en">        selp.f32        %f34</span><span class="pl-s1">,</span><span class="pl-en"> 0fFF800000</span><span class="pl-s1">,</span><span class="pl-en"> %f35</span><span class="pl-s1">,</span><span class="pl-en"> %p3</span><span class="pl-c">;</span>
<span class="pl-en">        st.</span><span class="pl-c1">global</span><span class="pl-en">.f32   </span><span class="pl-s1">[</span><span class="pl-en">%rd1</span><span class="pl-s1">],</span><span class="pl-en"> %f34</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">ret</span><span class="pl-c">;</span>

<span class="pl-en">}</span></pre></div>
<p>翻译成sm50架构：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">testLog(</span><span class="pl-c1">float</span><span class="pl-en">&amp;):</span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x140</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x144</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> LDG.E R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">R2</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> MOV32I R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3e1039f6</span><span class="pl-en"> </span>
<span class="pl-en"> FSETP.GEU.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-en">.175494350822287508e</span><span class="pl-s1">-</span><span class="pl-c1">38</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> @!P0 </span><span class="pl-k">FMUL</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">8388608</span><span class="pl-en"> </span>
<span class="pl-en"> IADD32I R4</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0x3f2aaaab</span><span class="pl-en"> </span>
<span class="pl-en"> ISETP.GE.U32.</span><span class="pl-k">AND</span><span class="pl-en"> P1</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R0.reuse</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">],</span><span class="pl-en"> PT </span>
<span class="pl-en"> LOP32I.</span><span class="pl-k">AND</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xff800000</span><span class="pl-en"> </span>
<span class="pl-en"> IADD R4</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R5 </span>
<span class="pl-en"> I2F.F32.S32 R5</span><span class="pl-s1">,</span><span class="pl-en"> R5         </span>
<span class="pl-en"> </span><span class="pl-k">FADD</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">1</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R6.reuse</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x4</span><span class="pl-s1">],</span><span class="pl-en"> R7 </span>
<span class="pl-en"> FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x8</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R6.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0xc</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x10</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R6.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x14</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R6.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x18</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R6.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x1c</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> SEL R4</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x0</span><span class="pl-s1">],</span><span class="pl-en"> P0 </span>
<span class="pl-en"> </span><span class="pl-k">FMUL</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> R6.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R7 </span>
<span class="pl-en"> FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-en">.1920928955078125e</span><span class="pl-s1">-</span><span class="pl-c1">07</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en"> FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> R6 </span>
<span class="pl-en"> @P1 MOV32I R6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x7f800000</span><span class="pl-en"> </span>
<span class="pl-en"> FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x2</span><span class="pl-s1">][</span><span class="pl-c1">0x24</span><span class="pl-s1">],</span><span class="pl-en"> R7 </span>
<span class="pl-en"> @P1 FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">+</span><span class="pl-en">INF </span><span class="pl-s1">,</span><span class="pl-en"> R6 </span>
<span class="pl-en"> FCMP.NEU R7</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">INF </span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> STG.E </span><span class="pl-s1">[</span><span class="pl-en">R2</span><span class="pl-s1">],</span><span class="pl-en"> R7 </span>
<span class="pl-en"> EXIT </span></pre></div>
<p>sm90:</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">testLog(</span><span class="pl-c1">float</span><span class="pl-en">&amp;):</span>
<span class="pl-en">LDC R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en">LDC.</span><span class="pl-c1">64</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x210</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en">ULDC.</span><span class="pl-c1">64</span><span class="pl-en"> UR4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x208</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en">LDG.E R0</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R2.</span><span class="pl-c1">64</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en">HFMA2.MMA R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-en">.</span><span class="pl-c1">5048828125</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">33</span><span class="pl-en">.</span><span class="pl-c1">21875</span><span class="pl-en"> </span>
<span class="pl-en">FSETP.GEU.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-en">.175494350822287508e</span><span class="pl-s1">-</span><span class="pl-c1">38</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en">@!P0 </span><span class="pl-k">FMUL</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">8388608</span><span class="pl-en"> </span>
<span class="pl-en">IADD3 R4</span><span class="pl-s1">,</span><span class="pl-en"> R0.reuse</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0x3f2aaaab</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en">ISETP.GE.U32.</span><span class="pl-k">AND</span><span class="pl-en"> P1</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x7f800000</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en">LOP3.LUT R5</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xff800000</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en">IADD3 R4</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R5</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en">I2FP.F32.S32 R5</span><span class="pl-s1">,</span><span class="pl-en"> R5 </span>
<span class="pl-k">FADD</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">1</span><span class="pl-en"> </span>
<span class="pl-en">FSEL R4</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">23</span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en">FSETP.NEU.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6.reuse</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">14084610342979431152</span><span class="pl-en"> </span>
<span class="pl-en">FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-en">.1920928955078125e</span><span class="pl-s1">-</span><span class="pl-c1">07</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en">@P1 </span><span class="pl-k">MOV</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x7f800000</span><span class="pl-en"> </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">12148627638816833496</span><span class="pl-en"> </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">13980610668659210205</span><span class="pl-en"> </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">16684235632419586182</span><span class="pl-en"> </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">20012299716472625732</span><span class="pl-en"> </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">24999669194221496582</span><span class="pl-en"> </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">33333182334899902344</span><span class="pl-en"> </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">5</span><span class="pl-en"> </span>
<span class="pl-k">FMUL</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7 </span>
<span class="pl-en">FFMA R7</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> R6 </span>
<span class="pl-en">FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">69314718246459960938</span><span class="pl-s1">,</span><span class="pl-en"> R7 </span>
<span class="pl-en">@P1 FFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">+</span><span class="pl-en">INF  </span>
<span class="pl-en">FSEL R5</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">INF </span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en">STG.E desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R2.</span><span class="pl-c1">64</span><span class="pl-s1">],</span><span class="pl-en"> R5 </span>
<span class="pl-en">EXIT </span></pre></div>
<p>求正弦值的，我们这次换成双精度的计算：</p>
<div class="highlight highlight-source-cuda-c++"><pre class="notranslate"><span class="pl-k">__global__</span> <span class="pl-k">void</span> <span class="pl-en">testSin</span>(<span class="pl-k">double</span>&amp; d){
    d = <span class="pl-c1">sin</span>(d);
}</pre></div>
<p>PTX代码：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">.visible .entry testSin(double&amp;)(</span>
<span class="pl-en">        .param .u64 testSin(double&amp;)_param_0</span>
<span class="pl-en">)</span>
<span class="pl-en">{</span>

<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.u64         %SPL</span><span class="pl-s1">,</span><span class="pl-en"> __local_depot4</span><span class="pl-c">;</span>
<span class="pl-en">        cvta.local.u64  %</span><span class="pl-v">SP</span><span class="pl-s1">,</span><span class="pl-en"> %SPL</span><span class="pl-c">;</span>
<span class="pl-en">        ld.param.u64    %rd3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">testSin(double&amp;)_param_0</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        cvta.to.</span><span class="pl-c1">global</span><span class="pl-en">.u64      %rd1</span><span class="pl-s1">,</span><span class="pl-en"> %rd3</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">add</span><span class="pl-en">.u64         %rd4</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">SP</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">add</span><span class="pl-en">.u64         %rd2</span><span class="pl-s1">,</span><span class="pl-en"> %SPL</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-c">;</span>
<span class="pl-en">        ld.</span><span class="pl-c1">global</span><span class="pl-en">.f64   %fd1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd1</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        {</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.b64         {%r4</span><span class="pl-s1">,</span><span class="pl-en"> %temp}</span><span class="pl-s1">,</span><span class="pl-en"> %fd1</span><span class="pl-c">;</span>
<span class="pl-en">        }</span>
<span class="pl-en">        {</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.b64         {%temp</span><span class="pl-s1">,</span><span class="pl-en"> %r5}</span><span class="pl-s1">,</span><span class="pl-en"> %fd1</span><span class="pl-c">;</span>
<span class="pl-en">        }</span>
<span class="pl-en">        </span><span class="pl-k">and</span><span class="pl-en">.b32         %r6</span><span class="pl-s1">,</span><span class="pl-en"> %r5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">2147483647</span><span class="pl-c">;</span>
<span class="pl-en">        setp.eq.s32     %p1</span><span class="pl-s1">,</span><span class="pl-en"> %r6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">2146435072</span><span class="pl-c">;</span>
<span class="pl-en">        setp.eq.s32     %p2</span><span class="pl-s1">,</span><span class="pl-en"> %r4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">and</span><span class="pl-en">.pred        %p3</span><span class="pl-s1">,</span><span class="pl-en"> %p2</span><span class="pl-s1">,</span><span class="pl-en"> %p1</span><span class="pl-c">;</span>
<span class="pl-en">        @%p3 bra</span>        <span class="pl-c1">$</span><span class="pl-en">L__BB4_3</span><span class="pl-c">;</span>
<span class="pl-en">        bra.uni</span>         <span class="pl-c1">$</span><span class="pl-en">L__BB4_1</span><span class="pl-c">;</span>

<span class="pl-c1">$</span><span class="pl-en">L__BB4_3:</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f64         %fd22</span><span class="pl-s1">,</span><span class="pl-en"> 0d0000000000000000</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mul</span><span class="pl-en">.rn.f64      %fd38</span><span class="pl-s1">,</span><span class="pl-en"> %fd1</span><span class="pl-s1">,</span><span class="pl-en"> %fd22</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.u32         %</span><span class="pl-v">r12</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-c">;</span>
<span class="pl-en">        bra.uni</span>         <span class="pl-c1">$</span><span class="pl-en">L__BB4_4</span><span class="pl-c">;</span>

<span class="pl-c1">$</span><span class="pl-en">L__BB4_1:</span>
<span class="pl-en">        </span><span class="pl-k">mul</span><span class="pl-en">.f64         %fd13</span><span class="pl-s1">,</span><span class="pl-en"> %fd1</span><span class="pl-s1">,</span><span class="pl-en"> 0d3FE45F306DC9C883</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">cvt</span><span class="pl-en">.rni.s32.f64         %</span><span class="pl-v">r12</span><span class="pl-s1">,</span><span class="pl-en"> %fd13</span><span class="pl-c">;</span>
<span class="pl-en">        st.local.u32    </span><span class="pl-s1">[</span><span class="pl-en">%rd2</span><span class="pl-s1">],</span><span class="pl-en"> %</span><span class="pl-v">r12</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">cvt</span><span class="pl-en">.rn.f64.s32  %fd14</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">r12</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">neg</span><span class="pl-en">.f64         %fd15</span><span class="pl-s1">,</span><span class="pl-en"> %fd14</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f64         %fd16</span><span class="pl-s1">,</span><span class="pl-en"> 0d3FF921FB54442D18</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd17</span><span class="pl-s1">,</span><span class="pl-en"> %fd15</span><span class="pl-s1">,</span><span class="pl-en"> %fd16</span><span class="pl-s1">,</span><span class="pl-en"> %fd1</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f64         %fd18</span><span class="pl-s1">,</span><span class="pl-en"> 0d3C91A62633145C00</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd19</span><span class="pl-s1">,</span><span class="pl-en"> %fd15</span><span class="pl-s1">,</span><span class="pl-en"> %fd18</span><span class="pl-s1">,</span><span class="pl-en"> %fd17</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f64         %fd20</span><span class="pl-s1">,</span><span class="pl-en"> 0d397B839A252049C0</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd38</span><span class="pl-s1">,</span><span class="pl-en"> %fd15</span><span class="pl-s1">,</span><span class="pl-en"> %fd20</span><span class="pl-s1">,</span><span class="pl-en"> %fd19</span><span class="pl-c">;</span>
<span class="pl-en">        abs.f64         %fd21</span><span class="pl-s1">,</span><span class="pl-en"> %fd1</span><span class="pl-c">;</span>
<span class="pl-en">        setp.ltu.f64    %p4</span><span class="pl-s1">,</span><span class="pl-en"> %fd21</span><span class="pl-s1">,</span><span class="pl-en"> 0d41E0000000000000</span><span class="pl-c">;</span>
<span class="pl-en">        @%p4 bra</span>        <span class="pl-c1">$</span><span class="pl-en">L__BB4_4</span><span class="pl-c">;</span>

<span class="pl-en">        { // callseq </span><span class="pl-c1">0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span>
<span class="pl-en">        st.param.f64    </span><span class="pl-s1">[</span><span class="pl-en">param0</span><span class="pl-s1">+</span><span class="pl-c1">0</span><span class="pl-s1">],</span><span class="pl-en"> %fd1</span><span class="pl-c">;</span>
<span class="pl-en">        st.param.b64    </span><span class="pl-s1">[</span><span class="pl-en">param1</span><span class="pl-s1">+</span><span class="pl-c1">0</span><span class="pl-s1">],</span><span class="pl-en"> %rd4</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">call</span><span class="pl-en">.uni (retval0)</span><span class="pl-s1">,</span><span class="pl-en"> </span>
<span class="pl-en">        __internal_trig_reduction_slowpathd</span><span class="pl-s1">,</span><span class="pl-en"> </span>
<span class="pl-en">        (</span>
<span class="pl-en">        param0</span><span class="pl-s1">,</span><span class="pl-en"> </span>
<span class="pl-en">        param1</span>
<span class="pl-en">        )</span><span class="pl-c">;</span>
<span class="pl-en">        ld.param.f64    %fd38</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">retval0</span><span class="pl-s1">+</span><span class="pl-c1">0</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        } // callseq </span><span class="pl-c1">0</span>
<span class="pl-en">        ld.local.u32    %</span><span class="pl-v">r12</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd2</span><span class="pl-s1">]</span><span class="pl-c">;</span>

<span class="pl-c1">$</span><span class="pl-en">L__BB4_4:</span>
<span class="pl-en">        </span><span class="pl-k">and</span><span class="pl-en">.b32         %</span><span class="pl-v">r8</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">r12</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">shl</span><span class="pl-en">.b32         %</span><span class="pl-v">r9</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">r12</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">3</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">and</span><span class="pl-en">.b32         %</span><span class="pl-v">r10</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">r9</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">8</span><span class="pl-c">;</span>
<span class="pl-en">        setp.eq.s32     %p5</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">r8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-c">;</span>
<span class="pl-en">        selp.f64        %fd23</span><span class="pl-s1">,</span><span class="pl-en"> 0d3DE5DB65F9785EBA</span><span class="pl-s1">,</span><span class="pl-en"> 0dBDA8FF8320FD8164</span><span class="pl-s1">,</span><span class="pl-en"> %p5</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mul</span><span class="pl-en">.wide.s32    %rd6</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">r10</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">8</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.u64         %rd7</span><span class="pl-s1">,</span><span class="pl-en"> __cudart_sin_cos_coeffs</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">add</span><span class="pl-en">.s64         %rd8</span><span class="pl-s1">,</span><span class="pl-en"> %rd7</span><span class="pl-s1">,</span><span class="pl-en"> %rd6</span><span class="pl-c">;</span>
<span class="pl-en">        ld.</span><span class="pl-c1">global</span><span class="pl-en">.nc.f64        %fd24</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd8</span><span class="pl-s1">+</span><span class="pl-c1">8</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mul</span><span class="pl-en">.rn.f64      %fd6</span><span class="pl-s1">,</span><span class="pl-en"> %fd38</span><span class="pl-s1">,</span><span class="pl-en"> %fd38</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd25</span><span class="pl-s1">,</span><span class="pl-en"> %fd23</span><span class="pl-s1">,</span><span class="pl-en"> %fd6</span><span class="pl-s1">,</span><span class="pl-en"> %fd24</span><span class="pl-c">;</span>
<span class="pl-en">        ld.</span><span class="pl-c1">global</span><span class="pl-en">.nc.f64        %fd26</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd8</span><span class="pl-s1">+</span><span class="pl-c1">16</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd27</span><span class="pl-s1">,</span><span class="pl-en"> %fd25</span><span class="pl-s1">,</span><span class="pl-en"> %fd6</span><span class="pl-s1">,</span><span class="pl-en"> %fd26</span><span class="pl-c">;</span>
<span class="pl-en">        ld.</span><span class="pl-c1">global</span><span class="pl-en">.nc.f64        %fd28</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd8</span><span class="pl-s1">+</span><span class="pl-c1">24</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd29</span><span class="pl-s1">,</span><span class="pl-en"> %fd27</span><span class="pl-s1">,</span><span class="pl-en"> %fd6</span><span class="pl-s1">,</span><span class="pl-en"> %fd28</span><span class="pl-c">;</span>
<span class="pl-en">        ld.</span><span class="pl-c1">global</span><span class="pl-en">.nc.f64        %fd30</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd8</span><span class="pl-s1">+</span><span class="pl-c1">32</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd31</span><span class="pl-s1">,</span><span class="pl-en"> %fd29</span><span class="pl-s1">,</span><span class="pl-en"> %fd6</span><span class="pl-s1">,</span><span class="pl-en"> %fd30</span><span class="pl-c">;</span>
<span class="pl-en">        ld.</span><span class="pl-c1">global</span><span class="pl-en">.nc.f64        %fd32</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd8</span><span class="pl-s1">+</span><span class="pl-c1">40</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd33</span><span class="pl-s1">,</span><span class="pl-en"> %fd31</span><span class="pl-s1">,</span><span class="pl-en"> %fd6</span><span class="pl-s1">,</span><span class="pl-en"> %fd32</span><span class="pl-c">;</span>
<span class="pl-en">        ld.</span><span class="pl-c1">global</span><span class="pl-en">.nc.f64        %fd34</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">%rd8</span><span class="pl-s1">+</span><span class="pl-c1">48</span><span class="pl-s1">]</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd7</span><span class="pl-s1">,</span><span class="pl-en"> %fd33</span><span class="pl-s1">,</span><span class="pl-en"> %fd6</span><span class="pl-s1">,</span><span class="pl-en"> %fd34</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd40</span><span class="pl-s1">,</span><span class="pl-en"> %fd7</span><span class="pl-s1">,</span><span class="pl-en"> %fd38</span><span class="pl-s1">,</span><span class="pl-en"> %fd38</span><span class="pl-c">;</span>
<span class="pl-en">        @%p5 bra</span>        <span class="pl-c1">$</span><span class="pl-en">L__BB4_6</span><span class="pl-c">;</span>

<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f64         %fd35</span><span class="pl-s1">,</span><span class="pl-en"> 0d3FF0000000000000</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd40</span><span class="pl-s1">,</span><span class="pl-en"> %fd7</span><span class="pl-s1">,</span><span class="pl-en"> %fd6</span><span class="pl-s1">,</span><span class="pl-en"> %fd35</span><span class="pl-c">;</span>

<span class="pl-c1">$</span><span class="pl-en">L__BB4_6:</span>
<span class="pl-en">        </span><span class="pl-k">and</span><span class="pl-en">.b32         %</span><span class="pl-v">r11</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">r12</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">2</span><span class="pl-c">;</span>
<span class="pl-en">        setp.eq.s32     %p6</span><span class="pl-s1">,</span><span class="pl-en"> %</span><span class="pl-v">r11</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0</span><span class="pl-c">;</span>
<span class="pl-en">        @%p6 bra</span>        <span class="pl-c1">$</span><span class="pl-en">L__BB4_8</span><span class="pl-c">;</span>

<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f64         %fd36</span><span class="pl-s1">,</span><span class="pl-en"> 0d0000000000000000</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">mov</span><span class="pl-en">.f64         %fd37</span><span class="pl-s1">,</span><span class="pl-en"> 0dBFF0000000000000</span><span class="pl-c">;</span>
<span class="pl-en">        fma.rn.f64      %fd40</span><span class="pl-s1">,</span><span class="pl-en"> %fd40</span><span class="pl-s1">,</span><span class="pl-en"> %fd37</span><span class="pl-s1">,</span><span class="pl-en"> %fd36</span><span class="pl-c">;</span>

<span class="pl-c1">$</span><span class="pl-en">L__BB4_8:</span>
<span class="pl-en">        st.</span><span class="pl-c1">global</span><span class="pl-en">.f64   </span><span class="pl-s1">[</span><span class="pl-en">%rd1</span><span class="pl-s1">],</span><span class="pl-en"> %fd40</span><span class="pl-c">;</span>
<span class="pl-en">        </span><span class="pl-k">ret</span><span class="pl-c">;</span>

<span class="pl-en">}</span></pre></div>
<p>sass实现不负重望地又搞出来一个slowpath函数：</p>
<div class="highlight highlight-source-assembly"><pre class="notranslate"><span class="pl-en">testSin(double&amp;):</span>
<span class="pl-en"> LDC R1</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> LDC.</span><span class="pl-c1">64</span><span class="pl-en"> </span><span class="pl-v">R12</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x210</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> ULDC.</span><span class="pl-c1">64</span><span class="pl-en"> UR4</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x208</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> IADD3 R1</span><span class="pl-s1">,</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0x30</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> LDG.E.</span><span class="pl-c1">64</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-v">R12</span><span class="pl-en">.</span><span class="pl-c1">64</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> ULDC UR6</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> IADD3 </span><span class="pl-v">R14</span><span class="pl-s1">,</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> UR6</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> LOP3.LUT R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R11</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x7fffffff</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> ISETP.EQ.</span><span class="pl-k">AND</span><span class="pl-en"> P1</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> ISETP.NE.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x7ff00000</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> @!P0 BRA P1</span><span class="pl-s1">,</span><span class="pl-en"> `(.L_x_0) </span>
<span class="pl-en"> UMOV UR6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x6dc9c883</span><span class="pl-en"> </span>
<span class="pl-en"> UMOV UR7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3fe45f30</span><span class="pl-en"> </span>
<span class="pl-en"> DSETP.GE.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> |</span><span class="pl-v">R10</span><span class="pl-en">|.reuse</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">2</span><span class="pl-en">.14748364800000000000e</span><span class="pl-s1">+</span><span class="pl-c1">09</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> DMUL R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-s1">,</span><span class="pl-en"> UR6 </span>
<span class="pl-en"> UMOV UR6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x54442d18</span><span class="pl-en"> </span>
<span class="pl-en"> UMOV UR7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3ff921fb</span><span class="pl-en"> </span>
<span class="pl-en"> F2I.F64 R0</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en"> I2F.F64 R6</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> STL </span><span class="pl-s1">[</span><span class="pl-en">R1</span><span class="pl-s1">],</span><span class="pl-en"> R0 </span>
<span class="pl-en"> DFMA R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R6</span><span class="pl-s1">,</span><span class="pl-en"> UR6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-en"> </span>
<span class="pl-en"> UMOV UR6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x33145c00</span><span class="pl-en"> </span>
<span class="pl-en"> UMOV UR7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3c91a626</span><span class="pl-en"> </span>
<span class="pl-en"> DFMA R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R6</span><span class="pl-s1">,</span><span class="pl-en"> UR6</span><span class="pl-s1">,</span><span class="pl-en"> R2 </span>
<span class="pl-en"> UMOV UR6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x252049c0</span><span class="pl-en"> </span>
<span class="pl-en"> UMOV UR7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x397b839a</span><span class="pl-en"> </span>
<span class="pl-en"> DFMA R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R6</span><span class="pl-s1">,</span><span class="pl-en"> UR6</span><span class="pl-s1">,</span><span class="pl-en"> R2 </span>
<span class="pl-en"> @!P0 BRA `(.L_x_1) </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R16</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1e0</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">CALL</span><span class="pl-en">.REL.NOINC `(</span><span class="pl-c1">$</span><span class="pl-en">testSin(double&amp;)</span><span class="pl-c1">$</span><span class="pl-en">__internal_trig_reduction_slowpathd) </span>
<span class="pl-en"> LDL R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">R1</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> BRA `(.L_x_1) </span>
<span class="pl-en">.L_x_0:</span>
<span class="pl-en"> DMUL R2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-en"> </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en">.L_x_1:</span>
<span class="pl-en"> IMAD.</span><span class="pl-k">SHL</span><span class="pl-en">.U32 R6</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x8</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">32</span><span class="pl-en">@lo(__cudart_sin_cos_coeffs) </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">32</span><span class="pl-en">@hi(__cudart_sin_cos_coeffs) </span>
<span class="pl-en"> LOP3.LUT R19</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x8</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IMAD.WIDE R18</span><span class="pl-s1">,</span><span class="pl-en"> R19</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x8</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en"> LDG.E.</span><span class="pl-c1">64</span><span class="pl-en">.CONSTANT R20</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R18.</span><span class="pl-c1">64</span><span class="pl-s1">+</span><span class="pl-c1">0x8</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> LDG.E.</span><span class="pl-c1">64</span><span class="pl-en">.CONSTANT R16</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R18.</span><span class="pl-c1">64</span><span class="pl-s1">+</span><span class="pl-c1">0x10</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> LDG.E.</span><span class="pl-c1">64</span><span class="pl-en">.CONSTANT </span><span class="pl-v">R14</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R18.</span><span class="pl-c1">64</span><span class="pl-s1">+</span><span class="pl-c1">0x18</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> LDG.E.</span><span class="pl-c1">64</span><span class="pl-en">.CONSTANT </span><span class="pl-v">R10</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R18.</span><span class="pl-c1">64</span><span class="pl-s1">+</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> LDG.E.</span><span class="pl-c1">64</span><span class="pl-en">.CONSTANT R4</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R18.</span><span class="pl-c1">64</span><span class="pl-s1">+</span><span class="pl-c1">0x28</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> LDG.E.</span><span class="pl-c1">64</span><span class="pl-en">.CONSTANT R6</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-en">R18.</span><span class="pl-c1">64</span><span class="pl-s1">+</span><span class="pl-c1">0x30</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> R2P PR</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3</span><span class="pl-en"> </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R22</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x79785eba</span><span class="pl-en"> </span>
<span class="pl-en"> DMUL </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R2 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3de5db65</span><span class="pl-en"> </span>
<span class="pl-en"> FSEL R22</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R22</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">4</span><span class="pl-en">.2945490664224492434e</span><span class="pl-s1">-</span><span class="pl-c1">19</span><span class="pl-s1">,</span><span class="pl-en"> !P0 </span>
<span class="pl-en"> FSEL R23</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0</span><span class="pl-en">.</span><span class="pl-c1">082518599927425384521</span><span class="pl-s1">,</span><span class="pl-en"> !P0 </span>
<span class="pl-en"> DFMA R20</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R22</span><span class="pl-s1">,</span><span class="pl-en"> R20 </span>
<span class="pl-en"> DFMA R16</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R20</span><span class="pl-s1">,</span><span class="pl-en"> R16 </span>
<span class="pl-en"> DFMA </span><span class="pl-v">R14</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R16</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R14</span><span class="pl-en"> </span>
<span class="pl-en"> DFMA </span><span class="pl-v">R10</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R14</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-en"> </span>
<span class="pl-en"> DFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en"> DFMA R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> R6 </span>
<span class="pl-en"> DFMA R2</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R2 </span>
<span class="pl-en"> @P0 DFMA R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">1</span><span class="pl-en"> </span>
<span class="pl-en"> @P1 DFMA R2</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">1</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> STG.E.</span><span class="pl-c1">64</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR4</span><span class="pl-s1">][</span><span class="pl-v">R12</span><span class="pl-en">.</span><span class="pl-c1">64</span><span class="pl-s1">],</span><span class="pl-en"> R2 </span>
<span class="pl-en"> EXIT </span>
<span class="pl-c1">$</span><span class="pl-en">testSin(double&amp;)</span><span class="pl-c1">$</span><span class="pl-en">__internal_trig_reduction_slowpathd:</span>
<span class="pl-en"> SHF.R.U32.HI R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x14</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R11</span><span class="pl-en">.reuse </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-en"> </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R17</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R11</span><span class="pl-en"> </span>
<span class="pl-en"> LOP3.LUT R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x7ff</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> ISETP.NE.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x7ff</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> @!P0 BRA `(.L_x_2) </span>
<span class="pl-en"> IADD3 R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0x400</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> CS2R R18</span><span class="pl-s1">,</span><span class="pl-en"> SRZ </span>
<span class="pl-en"> IADD3 R7</span><span class="pl-s1">,</span><span class="pl-en"> R1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x8</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> SHF.R.U32.HI R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x6</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> LOP3.LUT P2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3f</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IADD3 R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x10</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IADD3 R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x13</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> ISETP.GT.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xe</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> IADD3 R6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xf</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> SEL R4</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x12</span><span class="pl-s1">,</span><span class="pl-en"> !P0 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R6 </span>
<span class="pl-en"> ISETP.GT.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> @P0 BRA `(.L_x_3) </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">32</span><span class="pl-en">@lo(__cudart_i2opi_d) </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R3 </span>
<span class="pl-en"> </span><span class="pl-k">MOV</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">32</span><span class="pl-en">@hi(__cudart_i2opi_d) </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">SHL</span><span class="pl-en">.U32 R5</span><span class="pl-s1">,</span><span class="pl-en"> R2.reuse</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x800</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> SHF.L.U64.HI R17</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xb</span><span class="pl-s1">,</span><span class="pl-en"> R17 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R21</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R7 </span>
<span class="pl-en"> ULDC.</span><span class="pl-c1">64</span><span class="pl-en"> UR6</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x208</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> IMAD.WIDE </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-en"> </span>
<span class="pl-en"> LOP3.LUT R17</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x80000000</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IADD3 R0</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x78</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.X R23</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R6 </span>
<span class="pl-en">.L_x_4:</span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R0 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R23 </span>
<span class="pl-en"> LDG.E.</span><span class="pl-c1">64</span><span class="pl-en">.CONSTANT R2</span><span class="pl-s1">,</span><span class="pl-en"> desc</span><span class="pl-s1">[</span><span class="pl-en">UR6</span><span class="pl-s1">][</span><span class="pl-en">R2.</span><span class="pl-c1">64</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> IADD3 </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.WIDE.U32 R18</span><span class="pl-s1">,</span><span class="pl-en"> P3</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> R18 </span>
<span class="pl-en"> IMAD R25</span><span class="pl-s1">,</span><span class="pl-en"> R2.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R17.reuse</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.HI.U32 </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IADD3 R19</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> R25</span><span class="pl-s1">,</span><span class="pl-en"> R19</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD R20</span><span class="pl-s1">,</span><span class="pl-en"> R3.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R5.reuse</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.HI.U32 R25</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IADD3 R19</span><span class="pl-s1">,</span><span class="pl-en"> P1</span><span class="pl-s1">,</span><span class="pl-en"> R20</span><span class="pl-s1">,</span><span class="pl-en"> R19</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.X </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> P3 </span>
<span class="pl-en"> ISETP.GE.</span><span class="pl-k">AND</span><span class="pl-en"> P3</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> IMAD.HI.U32 R2</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> R17.reuse</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> STL.</span><span class="pl-c1">64</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">R21</span><span class="pl-s1">],</span><span class="pl-en"> R18 </span>
<span class="pl-en"> IADD3.X </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> R25</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IMAD R3</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.X R2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en"> IADD3.X </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> P1</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> P1</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IADD3 R0</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x8</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.X R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> P1 </span>
<span class="pl-en"> IADD3 R21</span><span class="pl-s1">,</span><span class="pl-en"> R21</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x8</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.X R23</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R23</span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R18</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-en"> </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R19</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R3 </span>
<span class="pl-en"> @!P3 BRA `(.L_x_4) </span>
<span class="pl-en">.L_x_3:</span>
<span class="pl-en"> IMAD.IADD R6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R6 </span>
<span class="pl-en"> IMAD R17</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x8</span><span class="pl-s1">,</span><span class="pl-en"> R7 </span>
<span class="pl-en"> STL.</span><span class="pl-c1">64</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">R17</span><span class="pl-s1">],</span><span class="pl-en"> R18 </span>
<span class="pl-en"> LDL.</span><span class="pl-c1">64</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">R1</span><span class="pl-s1">+</span><span class="pl-c1">0x18</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> @P2 LDL.</span><span class="pl-c1">64</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">R1</span><span class="pl-s1">+</span><span class="pl-c1">0x10</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> LDL.</span><span class="pl-c1">64</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">[</span><span class="pl-en">R1</span><span class="pl-s1">+</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> @P2 IADD3 R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x40</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> ULDC UR6</span><span class="pl-s1">,</span><span class="pl-en"> c</span><span class="pl-s1">[</span><span class="pl-c1">0x0</span><span class="pl-s1">][</span><span class="pl-c1">0x20</span><span class="pl-s1">]</span><span class="pl-en"> </span>
<span class="pl-en"> @P2 SHF.L.U32 </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> @P2 SHF.R.U64 </span><span class="pl-v">R10</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R0.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R3 </span>
<span class="pl-en"> @P2 SHF.R.U64 R6</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R0.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R7 </span>
<span class="pl-en"> @P2 SHF.L.U64.HI </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> R3 </span>
<span class="pl-en"> @P2 LOP3.LUT R2</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> @P2 SHF.L.U32 </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R15</span><span class="pl-en">.reuse</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> @P2 SHF.R.U32.HI R7</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R7 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">SHL</span><span class="pl-en">.U32 R6</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x4</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> @P2 SHF.L.U64.HI </span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> R5 </span>
<span class="pl-en"> @P2 SHF.R.U32.HI R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> R3 </span>
<span class="pl-en"> @P2 LOP3.LUT R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R10</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> @P2 LOP3.LUT R3</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> @P2 LOP3.LUT R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">SHL</span><span class="pl-en">.U32 R17</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x4</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> SHF.L.U64.HI R7</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x2</span><span class="pl-s1">,</span><span class="pl-en"> R3.reuse </span>
<span class="pl-en"> SHF.R.U32.HI R2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1e</span><span class="pl-s1">,</span><span class="pl-en"> R3 </span>
<span class="pl-en"> IADD3 RZ</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R6</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> LOP3.LUT R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x33</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> LOP3.LUT R17</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> SHF.L.U64.HI </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x2</span><span class="pl-s1">,</span><span class="pl-en"> R5 </span>
<span class="pl-en"> IADD3.X R4</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> LOP3.LUT R2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x33</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> LOP3.LUT R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x33</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IADD3.X R2</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> SHF.R.U32.HI R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1d</span><span class="pl-s1">,</span><span class="pl-en"> R5 </span>
<span class="pl-en"> IMAD.X R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en"> LOP3.LUT P1</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R0.reuse</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> LOP3.LUT R0</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> SEL R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> !P1 </span>
<span class="pl-en"> SEL R17</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> !P1 </span>
<span class="pl-en"> ISETP.NE.U32.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> SEL R4</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> !P1 </span>
<span class="pl-en"> SEL </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> !P0 </span>
<span class="pl-en"> @P1 IMAD.</span><span class="pl-k">MOV</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R6 </span>
<span class="pl-en"> </span><span class="pl-k">LEA</span><span class="pl-en">.HI R0</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x2</span><span class="pl-en"> </span>
<span class="pl-en"> FLO.U32 </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-en"> </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R0 </span>
<span class="pl-en"> IADD3 </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-v">R8</span><span class="pl-en">.reuse</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1f</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IADD3 R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3f</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> @P0 IMAD.</span><span class="pl-k">MOV</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-en"> </span>
<span class="pl-en"> ISETP.NE.U32.</span><span class="pl-k">AND</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R2.reuse</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> IADD3 R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x40</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> ISETP.NE.</span><span class="pl-k">AND</span><span class="pl-en">.EX P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en"> SHF.L.U32 </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> R17.reuse</span><span class="pl-s1">,</span><span class="pl-en"> R2.reuse</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> SHF.R.U64 R6</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en"> SHF.L.U64.HI </span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> R2</span><span class="pl-s1">,</span><span class="pl-en"> R3 </span>
<span class="pl-en"> SHF.R.U32.HI R4</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R7</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> @P0 LOP3.LUT R17</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> @P0 LOP3.LUT R3</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R15</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IMAD.WIDE.U32 </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x2168c235</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R6</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-en"> </span>
<span class="pl-en"> IADD3 RZ</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R8</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.HI.U32 R4</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0x36f0255e</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.WIDE.U32 R6</span><span class="pl-s1">,</span><span class="pl-en"> R17</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0x36f0255e</span><span class="pl-s1">,</span><span class="pl-en"> R6 </span>
<span class="pl-en"> IMAD </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> R3.reuse</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-c1">0x36f0255e</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IMAD.WIDE.U32 R6</span><span class="pl-s1">,</span><span class="pl-en"> P2</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x2168c235</span><span class="pl-s1">,</span><span class="pl-en"> R6 </span>
<span class="pl-en"> IMAD.X R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> P2 </span>
<span class="pl-en"> IADD3 R4</span><span class="pl-s1">,</span><span class="pl-en"> P2</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R9</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IADD3.X RZ</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> ISETP.GT.U32.</span><span class="pl-k">AND</span><span class="pl-en"> P3</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R4.reuse</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> PT </span>
<span class="pl-en"> IMAD.X R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> P2 </span>
<span class="pl-en"> IADD3.X R7</span><span class="pl-s1">,</span><span class="pl-en"> P2</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> ISETP.GT.</span><span class="pl-k">AND</span><span class="pl-en">.EX P0</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> R3.reuse</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> PT</span><span class="pl-s1">,</span><span class="pl-en"> P3 </span>
<span class="pl-en"> IMAD.X R6</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> P2 </span>
<span class="pl-en"> LOP3.LUT P2</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R11</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x80000000</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> SEL R7</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en"> SEL R4</span><span class="pl-s1">,</span><span class="pl-en"> R6</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> P0 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R6</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IADD3 R3</span><span class="pl-s1">,</span><span class="pl-en"> P3</span><span class="pl-s1">,</span><span class="pl-en"> R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IADD3 R7</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R14</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">UR6</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> LOP3.LUT </span><span class="pl-v">R11</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R11</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x80000000</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xc0</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> IMAD.X R4</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> P3 </span>
<span class="pl-en"> @P2 IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R0</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R5 </span>
<span class="pl-en"> SEL R5</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> !P0 </span>
<span class="pl-en"> SHF.R.U64 R3</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xa</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en"> STL </span><span class="pl-s1">[</span><span class="pl-en">R7</span><span class="pl-s1">],</span><span class="pl-en"> R0 </span>
<span class="pl-en"> IMAD.IADD R5</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> R2 </span>
<span class="pl-en"> IADD3 R3</span><span class="pl-s1">,</span><span class="pl-en"> P2</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> @P1 LOP3.LUT </span><span class="pl-v">R11</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R11</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x80000000</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3c</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en"> </span><span class="pl-k">LEA</span><span class="pl-en">.HI.X R4</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x16</span><span class="pl-s1">,</span><span class="pl-en"> P2 </span>
<span class="pl-en"> SHF.R.U64 R3</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> R4.reuse </span>
<span class="pl-en"> SHF.R.U32.HI R4</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x1</span><span class="pl-s1">,</span><span class="pl-en"> R4 </span>
<span class="pl-en"> IADD3 R2</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> P2</span><span class="pl-s1">,</span><span class="pl-en"> R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-s1">-</span><span class="pl-en">R6 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">SHL</span><span class="pl-en">.U32 R3</span><span class="pl-s1">,</span><span class="pl-en"> R5</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x100000</span><span class="pl-s1">,</span><span class="pl-en"> RZ </span>
<span class="pl-en"> IADD3.X R4</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x3fe00000</span><span class="pl-s1">,</span><span class="pl-en"> ~R3</span><span class="pl-s1">,</span><span class="pl-en"> P0</span><span class="pl-s1">,</span><span class="pl-en"> P2 </span>
<span class="pl-en"> LOP3.LUT R17</span><span class="pl-s1">,</span><span class="pl-en"> R4</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-v">R11</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0xfc</span><span class="pl-s1">,</span><span class="pl-en"> !PT </span>
<span class="pl-en">.L_x_2:</span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R3</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> R17 </span>
<span class="pl-en"> IMAD.</span><span class="pl-k">MOV</span><span class="pl-en">.U32 R17</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> RZ</span><span class="pl-s1">,</span><span class="pl-en"> </span><span class="pl-c1">0x0</span><span class="pl-en"> </span>
<span class="pl-en"> </span><span class="pl-k">RET</span><span class="pl-en">.REL.NODEC R16 `(testSin(double&amp;)) </span></pre></div></div>
<div style="font-size:small;margin-top:8px;float:right;"></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://jibinghu.github.io">ZOMBIE_</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("05/28/2024"!=""){
    var startSite=new Date("05/28/2024");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","jibinghu/jibinghu.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>


</html>
